# 20230214-如何下载并编译 Android 参考源码？

网上关于如何下载 Android 源码和编译的文章很多，其中最常见的就是 Android 官方文档：

> [下载源代码](https://source.android.google.cn/docs/setup/download/downloading?hl=zh-cn)
>
> - https://source.android.google.cn/docs/setup/download/downloading?hl=zh-cn

我原来以为大家知道如何下载 Android 的 AOSP 源码并并基于某个 Google 的设备进行编译，但我发现不断会有朋友加私信问我，或者在群里请教 Android 的 AOSP 的源码下载和编译问题。

这里把 Android 的 AOSP 源码下载和编译做一个汇总。



## 0. 环境

关于 Android 源码的下载和编译环境的配置在这里不再啰嗦。

我使用的环境是：

- 系统: Ubuntu 22.04 LTS 桌面版

- git: v2.34

- Java: OpenJDK 11.0.19

```bash
rocky@guyongqiangx:~$ lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 22.04.2 LTS
Release:        22.04
Codename:       jammy
rocky@guyongqiangx:~$ git --version
git version 2.34.1
rocky@guyongqiangx:~$ java -version
openjdk version "11.0.19" 2023-04-18
OpenJDK Runtime Environment (build 11.0.19+7-post-Ubuntu-0ubuntu122.04.1)
OpenJDK 64-Bit Server VM (build 11.0.19+7-post-Ubuntu-0ubuntu122.04.1, mixed mode, sharing)
rocky@guyongqiangx:~$
```

## 1. 简洁步骤

总体来说，下载和编译 Android 的 AOSP 源码需要以下几个步骤：

1. 确定要下载的 Android 代码版本；
2. 下载 Android 的 AOSP 源码；
3. 下载 Android 设备对应的预编译驱动文件；
4. 安装预编译的驱动文件；
5. 编译源码；



## 2. 详细步骤



## 1. 编译代码前的问题

在开始下载代码并执行编译之前，需要问自己一个问题。

这个问题很重要，就是我下载和编译 AOSP 来做什么？

这个问题的答案影响到你下载 Android 的版本，以及基于哪个设备进行编译。



## 2. 环境问题

### 1. 系统

### 2. 安装 git 和 repo

### 3. 安装 Java

### 4. Android 的源代码



## 3. AOSP 和 Android

尽管我学习 Android 很久了，但好长一段时间内我都没有整明白 Android 和 AOSP 到底是什么关系。

## 4. 编译 AOSP 的繁琐解释版本

## 5. 编译 AOSP 的简单备忘版本



